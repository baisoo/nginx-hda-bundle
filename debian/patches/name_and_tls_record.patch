Description: <short summary of the patch>
 TODO: Put a short summary on the line above and replace this paragraph
 with a longer explanation of this change. Complete the meta-information
 with other relevant fields (see below for details). To make it easier, the
 information below has been extracted from the changelog. Adjust it or drop
 it.
 .
 nginx (1.10.0-1-ppa7~xenail) xenial; urgency=medium
 .
   * TLS record patch fixed a bit.
   * Upstream update.
   * Dynamic modules.
   * Upstream order module.
Author: hda_launchpad (hda_launchpad) <admin@hda.me>

---
The information above should follow the Patch Tagging Guidelines, please
checkout http://dep.debian.net/deps/dep3/ to learn about the format. Here
are templates for supplementary fields that you might want to add:

Origin: <vendor|upstream|other>, <url of original patch>
Bug: <url in upstream bugtracker>
Bug-Debian: https://bugs.debian.org/<bugnumber>
Bug-Ubuntu: https://launchpad.net/bugs/<bugnumber>
Forwarded: <no|not-needed|url proving that it has been forwarded>
Reviewed-By: <name and email of someone who approved the patch>
Last-Update: <YYYY-MM-DD>

--- nginx-1.10.0-1.orig/src/event/ngx_event_openssl.c
+++ nginx-1.10.0-1/src/event/ngx_event_openssl.c
@@ -740,7 +740,7 @@ ngx_ssl_info_callback(const ngx_ssl_conn
             wbio = SSL_get_wbio((ngx_ssl_conn_t *) ssl_conn);
 
             if (rbio != wbio) {
-                (void) BIO_set_write_buffer_size(wbio, NGX_SSL_BUFSIZE);
+                (void) BIO_set_write_buffer_size(wbio, 16384);
                 c->ssl->handshake_buffer_set = 1;
             }
         }
--- nginx-1.10.0-1.orig/src/event/ngx_event_openssl.h
+++ nginx-1.10.0-1/src/event/ngx_event_openssl.h
@@ -135,7 +135,7 @@ typedef struct {
 #define NGX_SSL_BUFFER   1
 #define NGX_SSL_CLIENT   2
 
-#define NGX_SSL_BUFSIZE  16384
+#define NGX_SSL_BUFSIZE  1360
 
 
 ngx_int_t ngx_ssl_init(ngx_log_t *log);
--- nginx-1.10.0-1.orig/src/http/ngx_http_header_filter_module.c
+++ nginx-1.10.0-1/src/http/ngx_http_header_filter_module.c
@@ -46,8 +46,8 @@ ngx_module_t  ngx_http_header_filter_mod
 };
 
 
-static char ngx_http_server_string[] = "Server: nginx" CRLF;
-static char ngx_http_server_full_string[] = "Server: " NGINX_VER CRLF;
+static char ngx_http_server_string[] = "Server: cloudflare-nginx" CRLF;
+static char ngx_http_server_full_string[] = "Server: cloudflare-nginx" CRLF;
 
 
 static ngx_str_t ngx_http_status_lines[] = {
